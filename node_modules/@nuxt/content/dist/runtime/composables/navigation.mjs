import { hash } from "ohash";
import { useCookie } from "#app";
import { jsonStringify } from "../utils/json.mjs";
import { addPrerenderPath, withContentBase } from "./utils.mjs";
export const fetchContentNavigation = (queryBuilder) => {
  let params = queryBuilder;
  if (typeof params?.params === "function") {
    params = params.params();
  }
  const apiPath = withContentBase(params ? `/navigation/${hash(params)}.json` : "/navigation");
  if (!process.dev && process.server) {
    addPrerenderPath(apiPath);
  }
  return $fetch(apiPath, {
    method: "GET",
    responseType: "json",
    params: {
      _params: jsonStringify(params || {}),
      previewToken: useCookie("previewToken").value
    }
  });
};
